<main>
  <section>
    <article class="page__filter">
      <div>
        <label>Page:</label>
        <select (change)="pageSelector($event)" name="page">
          <option value="default" class="page__selector-default">
            {{ dataService.pageNum }}
          </option>
          <option *ngFor="let page of pageNumbers" [value]="page">
            {{ page }}
          </option>
        </select>
      </div>

      <div class="main__search-container">
        <input
          type="text"
          placeholder="Search for a character"
          id="search-character__input"
        />
        <button (click)="searchCharacter()" class="search-button">
          <fa-icon [icon]="['fas', 'search']"></fa-icon>
        </button>
      </div>

      <div>
        <!-- <label>Status:</label> -->
        <select (change)="statusSelector($event)" name="status">
          <option value="default">Status</option>
          <option value="alive">Alive</option>
          <option value="dead">Dead</option>
          <option value="unknown">Unknown</option>
        </select>
      </div>
    </article>
    <article *ngIf="datos" class="container">
      <div *ngFor="let char of datos" class="character__container">
        <p class="character__id">#{{ char.id }}</p>
        <img src="{{ char.image }}" />
        <div class="character__info">
          <div>
            <p class="character__name">{{ char.name }}</p>
            <p class="character__data">
              <span
                [ngClass]="{
                  'status-alive': char.status === 'Alive',
                  'status-dead': char.status === 'Dead',
                  unknown: char.status !== 'Alive' && char.status !== 'Dead'
                }"
              >
                {{ char.status }}
              </span>
              -
              <span>{{ char.species }}</span>
            </p>
          </div>

          <div>
            <p class="character__subtitle">Last known location:</p>
            <p>{{ char.location.name }}</p>
          </div>

          <div>
            <p class="character__subtitle">First seen in:</p>
            <p>{{ getEpisodeNumber(char.episode[0]) }}</p>
          </div>
        </div>
      </div>
    </article>
    <article class="buttons__container">
      <button [disabled]="dataService.pageNum <= 1" (click)="prevPage()">
        <fa-icon [icon]="['fas', 'chevron-left']"></fa-icon>
      </button>
      <div class="page__selector">
        <button *ngIf="dataService.pageNum > 1" (click)="prevPage()">
          {{ dataService.pageNum - 1 }}
        </button>
        <span class="current-page__indicator">
          {{ dataService.pageNum }}
        </span>
        <button *ngIf="dataService.pageNum < 42" (click)="nextPage()">
          {{ dataService.pageNum + 1 }}
        </button>
      </div>
      <button [disabled]="dataService.pageNum >= 42" (click)="nextPage()">
        <fa-icon [icon]="['fas', 'chevron-right']"></fa-icon>
      </button>
    </article>
  </section>

  <div *ngIf="!datos" class="loading">
    <p>Cargando datos...</p>
  </div>
</main>
